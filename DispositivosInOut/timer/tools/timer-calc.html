<!DOCTYPE html>
<html>

<head>
	<title>Timer Module - Calculadora</title>
	<meta charset="utf-8">
</head>

<body onload='calculateDelay()' style="background: #eee; max-width: 600px; margin: auto; font-family: Verdana, sans-serif;">

	<script>
	function calculateDelay() {
		var p = parseInt(document.getElementById("form").prescaler.value);
		var r = parseInt(document.getElementById("form").rounds.value);

		if (isNaN(p) | isNaN(r) | p > 65535 | r > 65535 | p <= 0 | r <= 0) {
			document.getElementById("results").style.visibility = "hidden";
			document.getElementById("errorMsg").style.visibility = "visible";
			document.getElementById("errorMsg").innerHTML="Error: Valores numéricos entre 1 y 65535 (16 bits)";
		}
		else {
			var delay = (p+1)*r / 100E6;

			document.getElementById("results").style.visibility = "visible";
			document.getElementById("errorMsg").style.visibility = "hidden";

			document.getElementById("sValue").innerHTML=delay.toFixed(4);
			document.getElementById("msValue").innerHTML=(delay / 1E-3).toFixed(4);
			document.getElementById("usValue").innerHTML=(delay / 1E-6).toFixed(4);
			document.getElementById("nsValue").innerHTML=(delay / 1E-9).toFixed(4);

		}
	}
	</script>

	<div>
		<h1>Timer</h1>
		<p>Rango de tiempos: [20ns, 42.9490s]

		<form id="form" action="" method="get">
		<table>
				<tr>
				<td><label for="rounds">Rounds</label></td>
				<td><input type="number" name="rounds" maxlength="5" value="1"
					  min="1" max="65535" onchange='calculateDelay()'></td>
				</tr>
				<tr>
				<td><label for="prescaler">Prescaler</label></td>
				<td><input type="number" name="prescaler" maxlength="5" value="1"
					 min="1" max="65535" onchange='calculateDelay()'></td>
				</tr>
		</table>
		</form>
	</div>

	<div>
		<div id="errorMsg"></div>

		<table id="results" style="text-align: right">
			<tr>
				<th><em>t<sub>Delay</sub></em></th>
				<th></th>
			</tr>
			<tr>
				<td id="sValue"></td>
				<td>s</td>
			</tr>
			<tr>
				<td id="msValue"></td>
				<td>ms</td>
			</tr>
			<tr>
				<td id="usValue"></td>
				<td>µs</td>
			</tr>
			<tr>
				<td id="nsValue"></td>
				<td>ns</td>
			</tr>
		</table>
	</div>
</body>

</html>
